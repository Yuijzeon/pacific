
@{
    ViewBag.Title = "article";

    //List<string> MyCSSs = new List<string>();
    //MyCSSs.Add("<link href=\"https://cdn.quilljs.com/1.3.6/quill.snow.css\" rel=\"stylesheet\">");
    //MyCSSs.Add("<link href=\"~/Content/css/post.css\" rel=\"stylesheet\"/>");

    //ViewBag.MyCSSs = MyCSSs;
}

@section HtmlHeadEnd{
    <link rel="stylesheet" href="~/Content/css/post.css" />
    <link rel="stylesheet" href="https://cdn.quilljs.com/1.3.6/quill.snow.css" />
    <script src="https://kit.fontawesome.com/af1cff1fa5.js" crossorigin="anonymous"></script>

}

<section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('../../Content/images/bg_1.jpg');">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-center">
            <div class="col-md-9 ftco-animate pb-5 text-center">
                <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home <i class="fa fa-chevron-right"></i></a></span> <span>新增文章 <i class="fa fa-chevron-right"></i></span></p>
                <h1 class="mb-0 bread">Post</h1>
            </div>
        </div>
    </div>
</section>

<section class="ftco-section">
    <div class="container">
        <form class="row p_row">
            <div class="postform col col-12 col-md-6 col-lg-3 my-3">
                <div class="postform_L">
                    <label class="postLabel" for="pTitle"><i class="fas fa-suitcase-rolling"></i>請輸入旅程標題</label>
                    <input id="pTitle" type="text" name="title" placeholder=" 旅遊行程標題" size="22" />
                </div>
                <div class="postform_L">
                    <label style="display: inline" class="postLabel" for="pStartDate"><i class="far fa-calendar-check"></i>請選擇開始日期</label>
                    <input id="pStartDate" type="text" name="startDate" class="pFormInput" size="18" />
                </div>
                <div class="postform_L">
                    <label class="postLabel" for="pEndDate"><i class="far fa-calendar-minus"></i>請選擇結束日期</label>
                    <input id="pEndDate" type="text" name="endDate" class="pFormInput" size="18" />
                </div>
                <div class="postform_L">
                    <label class="postLabelPeo" for="pplNumber"><i class="fas fa-user-check"></i>接待人數</label>
                    <input id="pplNumber" type="text" name="ppNumber" class="pFormInput" />
                </div>
            </div>
            <div id="form-container" class="col col-12 col-md-6 col-lg-9 ">
                <div class="postform_R col">
                    <section class="uploadImg"></section>
                    <button class="change-link">上傳照片 / Upload picture</button>
                    <div class="form-group">
                        <label for="about" type="hidden"></label>
                        <div class="postIntro">▋ 旅程簡介</div>
                        <input name="about" type="hidden">
                        <div id="editor-container">

                        </div>
                    </div>
                    <div class="col-xs-8">
                        <div class="form-group">
                            <div class="postIntro">▋ 詳細地址</div>
                            <input class="form-control" name="display_name" type="text" placeholder=" 請輸入詳細地址">
                        </div>
                        <div id="Hashtag選擇區" class="form-group">
                            <div class="postIntro"> Hashtags</div>

                            @*Hashtags放這邊*@

                        </div>
                        
                    </div>
                    <div class="row">
                        <button class="btn btn-primary" type="submit">分享旅程</button>
                    </div>
                </div>
            </div>
        </form>
        @*<div class="row mt-5">
                <div class="col text-center">
                    <div class="block-27">
                        <ul>
                            <li><a href="#">&lt;</a></li>
                            <li class="active"><span>1</span></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li><a href="#">&gt;</a></li>
                        </ul>
                    </div>
                </div>
            </div>*@
    </div>
</section>

<section class="ftco-intro ftco-section ftco-no-pt">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 text-center">
                <div class="img" style="background-image: url(../../Content/images/bg_2.jpg);">
                    <div class="overlay"></div>
                    <h2>We Are Pacific A Travel Agency</h2>
                    <p>We can manage your dream building A small river named Duden flows by their place</p>
                    <p class="mb-0"><a href="#" class="btn btn-primary px-4 py-3">Ask For A Quote</a></p>
                </div>
            </div>
        </div>
    </div>
</section>

@section HtmlBodyEnd{
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <style type="text/css">
        button.ui-datepicker-trigger {
            border:none;
            margin-left:0.5rem;
        }
    </style>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="~/Content/js/jquery-3.6.0.min.js"></script>
    <script src="~/Content/js/jquery-ui.min.js"></script>
    <script src="~/Content/js/jquery.ui.datepicker-zh-TW.js"></script>


    <script type="text/javascript">
        $(function () {
            $("#pStartDate,#pEndDate").datepicker({
                dateFormat: 'yy/mm/dd',
                showOn: "both",
                buttonImage: "../Content/images/calendar.png",
                buttonText: "請挑選日期",
                changeYear: true,
                changeMonth: true
            });
            $("input[name=ppNumber]").spinner({
                max: 10 , min: 1
            });
        });
    </script>
    <script>
        var Font = Quill.import('formats/font');
        Font.whiteList = ['mirza', 'roboto'];
        Quill.register(Font, true);

        var quill = new Quill('#editor-container', {
            modules: {
                toolbar: [
                    [{ header: [1, 2, false] }],
                    ['bold', 'italic'],
                    ['link', 'blockquote', 'code-block', 'image'],
                    [{ list: 'ordered' }, { list: 'bullet' }]
                ]
            },
            scrollingContainer: '#scrolling-container',
            placeholder: '開始分享您的旅程..',
            theme: 'snow'
        });

        var form = document.querySelector('form');
        form.onsubmit = function () {
            // Populate hidden form on submit
            //var about = document.querySelector('input[name=about]');
            //about.value = JSON.stringify(quill.getContents());

            console.log("Submitted", $(form).serialize(), $(form).serializeArray());

            // No back end to actually submit to!
            // alert('Open the console to see the submit data!')

            $.ajax({
                type: 'Post',
                url: '../Post/New',
                data: $(form).serialize()
            }).done(function (msg) {
                alert(msg);
            });

            return false;
        };

        // 取得 Hashtags
        $(document).ready(function () {
            $.ajax({
                type: 'GET',
                url: '../Post/GetHashtags'
            }).done(function (Hashtags) {
                var html = '';
                for (var Hashtag of Hashtags) {
                    html +=
                        `<input type="ckeckbox" class="post-btn btn-outline-dark border:none" hashtagId="${Hashtag.Id}" category="${Hashtag.類別}" value="${Hashtag.名稱}" />`;
                }
                $('#Hashtag選擇區').append(html);

                $('#Hashtag選擇區 input').click(function () {
                    $(this).attr('name', function (index, attr) {
                        return attr == 'Hashtag' ? null : 'Hashtag';
                    });

                    var Hashtag類別 = $(this).attr('category');
                    switch (Hashtag類別) {
                        case '愛好':
                            $(this).toggleClass('btn-warning');
                            break;
                        case '地區':
                            $(this).toggleClass('btn-info');
                            break;
                    }
                });
            });
        });
    </script>
}