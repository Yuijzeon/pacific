@using GoGoShare.Models
@model Search

@{
    ViewBag.Title = "主題旅遊";
}

@*@section HtmlHeadEnd{ 需要用的話請取消註解 }*@

@Html.Partial("_搜尋抬頭", Model.輪播文章)

@Html.Partial("_搜尋欄位")

@Html.Partial("_搜尋結果", Model.搜尋結果)

@section HtmlBodyEnd{
    <script>
         //var searchbtn = $("#btn");
         //var form = $('form');
         //$('form').submit(function (e) {
         //    e.preventDefault();
         //});

         //$("#btn").click(function () {
         //    console.log("Submitted", form.serialize(), form.serializeArray());
        //});
        var Login = '@Session["Name"]';
        $(function () {
            $(".collection").hide();
            if (Login != "")
                $(".collection").show();
        })

        $(document).ready(function () {
            $(".heart").on("click", function () {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("加入收藏","Search")',
                    data: { id: $(e.target).attr('article-id') },
                });
                $(this).toggleClass("is-active");
            })

            @foreach (var 文章 in Model.搜尋結果)
            {
                if (Model.收藏文章.Find(p => p.Id == 文章.Id) != null)
                {
                    @Html.Raw($"$('.heart[article-id=\"{文章.Id}\"').toggleClass('is-active');");
                }
            }
        });
    </script>
}